<!DOCTYPE html>

<html lang="eng">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Create a Class</title>
        <meta name="description" content="Faculty page to create a class">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
        <link href="../css/main.css" rel="stylesheet">
        <script
          src="https://code.jquery.com/jquery-3.6.0.min.js"
          integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
          crossorigin="anonymous"></script>      
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>
        <script src="./js/validateAccess.js"></script>
        <script src="./js/newClass.js" defer></script>
    </head>
    <body>
      
      <!-- Navbar and display page -->
      <nav class="navbar navbar-expand-lg navbar-light">
          <a class="navbar-left" href="facultyHomepage.html">
              <img src="../img/logo.png" alt="logo" id="logo" height="75">
          </a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
              <a class="nav-item nav-link" href="facultyHomepage.html" style="margin-left: 60px"> <strong>Home</strong></a>
              <a class="nav-item nav-link active" href="newUser.html"><strong>New User</strong></a>
              <a class="nav-item nav-link active" href="lostUserPass.html"><strong>Lost Username/Password</strong></a>
          </div>
      </nav>


      <!-- Based on examples from bootstrap form docs. Src: https://getbootstrap.com/docs/4.0/components/forms/ and https://getbootstrap.com/docs/5.0/forms --> 
      <!-- Main Form -->
      <div class="container" style="background: rgba(255, 255, 255, 0.3); padding: 30px;height:-webkit-fill-available;">
        <form class="needs-validation" id="newClassForm">
            <div class="row g-3 needs-validation">
              <div class="col-md-4 mb-3">
                <label for="className">Class name</label>
                <input type="text" class="form-control" id="className" placeholder="Class name" required>
                <small></small>
              </div>
              <div class="col-md-4 mb-3">
                <label for="classCapacity">Capacity</label>
                <input type="text" class="form-control" id="classCapacity" placeholder="Capacity" required>
                <small></small>
              </div>
              <div class="col-md-4 mb-3">
                <label for="courseNum">Course Number</label>
                <input type="text" class="form-control" id="courseNum" placeholder="Course Number" required>
                <small></small>
              </div>
            </div>
            <div class="row g-3">
              <div class="col-md-4 mb-3">
                <label for="courseInstructor">Instructor</label>
                <select class="form-select form-control" aria-label="Default select example" id="courseInstructor">
                </select> 
                <small></small>              
              </div>
              <div class="col-md-4 mb-3">
                <label for="dept">Department</label>
                <input type="text" class="form-control" id="dept" placeholder="Department" required>
                <small></small>
              </div>
              <div class="col-md-4 mb-3">
                <label for="semester">Semester</label>
                <div class="sem" id="sem">
                  <select class="selectpicker form-control" id="semester" multiple required>
                    <optgroup id="semesterSeason" label="Season" data-max-options="1" required>
                      <option value="spring" selected>Spring</option>
                      <option value="summer">Summer</option>
                      <option value="fall">Fall</option>
                      <option value="winter">Winter</option>
                    </optgroup>
                    <optgroup id="semesterYear" label="Year" data-max-options="1" required>
                      <option value="2020" selected>2020</option>
                    </optgroup>
                  </select>
                </div>
                <small></small>
                
                
              </div>
            </div>

            <div class="row">
                <div class="col-md-6 offset-md-3">
                    <div class="input-group">
                        <textarea class="form-control" id="courseDesc" rows="3" placeholder="Enter course description here" required></textarea>
                        <small></small>
                    </div>
                </div>
            </div>

            <div class="row" style="margin-top: 10px;">
                <div class="col-md-3 offset-md-3">
                  <label for="enrDt" class="lead">Choose the final date to enroll:</label>
                </div>
                <div class="col-md-3">
                  <input type="date" id="enrDt" required>
                </div>
            </div>


            <div class="row">
              <p class="lead col-md-12 text-center" style="margin-top: 10px;">Select the days of the week and the time your class will take place</p>
            </div>
            <div class="days"> 
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="checkbox" id="moBtn" value="monday">
                <label class="form-check-label btn btn-outline-primary" for="moBtn">Mo</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="checkbox" id="tuBtn" value="tuesday">
                <label class="form-check-label btn btn-outline-primary" for="tuBtn">Tu</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="checkbox" id="weBtn" value="wednesday">
                <label class="form-check-label btn btn-outline-primary" for="weBtn">We</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="checkbox" id="thBtn" value="thursday">
                <label class="form-check-label btn btn-outline-primary" for="thBtn">Th</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="checkbox" id="frBtn" value="friday">
                <label class="form-check-label btn btn-outline-primary" for="frBtn">Fr</label>
              </div>
            </div>
            <small></small>

            <div class="row" id="timeBlock">
              <div class="col-md">
                  <div class="input-group mb-3">
                    <div class="input-group-prepend">
                      <span class="input-group-text" id="basic-addon3">From</span>
                    </div>
                    <input type="time" class="form-control" id="fromTime" aria-describedby="basic-addon3">
                  </div>
              </div>
              <div class="col-md">
                  <div class="input-group mb-3">
                    <div class="input-group-prepend">
                      <span class="input-group-text" id="basic-addon4">To</span>
                    </div>
                    <input type="time" class="form-control" id="toTime" aria-describedby="basic-addon3">
                  </div>
              </div>
            </div>
            <small></small>
            <div class="row justify-content-md-center" >
              <button class="btn btn-primary btn-block" type="submit">Submit form</button>
              <a href="facultyHomepage.html" class="btn btn-danger btn-block">Cancel</a>
            </div>
          </form><!-- Based on examples from bootstrap form docs. Src: https://getbootstrap.com/docs/4.0/components/forms/ and https://getbootstrap.com/docs/5.0/forms --> 
        </div>
  <script>
    $(document).ready(()=>{
      if(localStorage.getItem("token") != null){
        $("#navbarNavAltMarkup").append('<a class="nav-item nav-link active" href="/" onclick="return removeJWT()"><strong>Logout</strong></a>');
      }
      // This loads the instructor dropdwon select option with all the faculty members 
      $.get('/api/faculty')
      .done((data) =>{
        if(data){
          $.each(data, (idx, val) =>{
            $("#courseInstructor").append($('<option>',{
              value: val._id,
              text : `${val.firstName} ${val.lastName}`
            }))
          })
        }
      })

      // Just adds 50 years starting from 2015 so I don't manually have to type them out
      $.each(Array.from({length:50},(v,k)=>k+2021), (idx, val) =>{
        $("#semesterYear").append($('<option>', {
          value: val,
          text: val
        }))
      })
    }); // end ready
    function removeJWT(){
      localStorage.removeItem("token");
    }

  </script>
    </body>
</html>